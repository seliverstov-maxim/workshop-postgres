# Нормальные формы

##Процесс нормализации

Процесс нормализации основывается на концепции нормальных форм. Говорят, что отношение находится в определенной нормальной форме, если оно удовлетворяет заданному набору условий. Существует несколько нормальных форм, которые определены к настоящему времени. Первые три были описаны Э. Коддом, следующую формулу вывели Р. Бойс и Э. Кодд (НФБК – нормальная форма Бойса-Кодда), а четвёртую и пятую нормальные формы определил Р. Фейгин.

##Понятие функциональной зависимости

> Пусть R – это отношение. С одной стороны, оно имеет конкретное (постоянное) значение в данный момент времени. С другой стороны, это переменная, которая в каждый момент времени может принять некоторое новое значение.
Понятие ФЗ можно применить и к первому, и ко второму случаю. Однако мы будем рассматривать только второй случай, т.к. он больше соответствует реальности.

__Определение функциональной зависимости__. Пусть R – переменная отношения. X и Y – произвольные подмножества множества атрибутов R. Тогда Y функционально зависит от X, что в символическом виде записывается как X → Y (читается как «X функционально определяет Y») тогда и только тогда, когда для любого допустимого значения R каждое значение X связано точно с одним значением Y.

> *Здесь X называют детерминантом ФЗ, а Y – зависимой частью ФЗ.*

__Пример__: Пусть R – это отношение Students. X – код студента, а Y – множество всех атрибутов студента. Тогда X → Y, т.к. X представляет собой первичный ключ, который уникально идентифицирует запись в таблице Students.

Такое утверждение будет верно и для более общего случая: если X – это потенциальный ключ, то множество всех атрибутов R всегда функционально зависит от X. Однако следует иметь в виду, что если в R имеется ФЗ, левая часть которой не включает потенциальный ключ, то R обладает избыточностью, что затрудняет обеспечение целостности данных и занимает лишние ресурсы системы. Если ни один атрибут не может быть опущен из левой части, то такая функциональная зависимость называется неприводимой (точнее, неприводимой слева).

__Пример__: 

`{StudentID, FirstName, LastName, MiddleName} → {BirthDate}` – приводимая ФЗ.

`{StudentID} → {BirthDate}` – неприводимая ФЗ.

Множество функциональных зависимостей называется неприводимым тогда и только тогда, когда оно обладает всеми тремя перечисленными ниже свойствами:
* Зависимая часть каждой функциональной зависимости содержит только один атрибут.
* Детерминант каждой функциональной зависимости является неприводимым.
* Ни одна функциональная зависимость из множества не может быть удалена без потери информации о связях.

## Декомпозиция без потерь

Существенным аспектом процедуры нормализации является декомпозиция – разбиение отношения на производные. При этом такое разбиение не должно повлечь за собой потерю информации. Если отношение разбито на два без потерь, то это разбиение можно назвать обратимым, т.е. можно произвести обратное соединение.

## Первая нормальная форма
> Переменная отношения находится в первой нормальной форме тогда и только тогда, когда в любом допустимом значении отношения каждый его кортеж содержит только скалярные значения для каждого из атрибутов, т.е. значения всех полей отношения должны быть логически неделимы.

Кортеж, Переменная отношения - это записи в таблице.
Атрибут - это колонка в записи.

Рассматриваемая таблица должна удовлетворять следующим пяти условиям:
* Нет упорядочивания строк сверху вниз (другими словами, порядок строк не несет в себе никакой информации).
* Нет упорядочивания столбцов слева направо (другими словами, порядок столбцов не несет в себе никакой информации).
* Нет повторяющихся строк.
* Каждое пересечение строки и столбца содержит ровно одно значение из соответствующего домена (и больше ничего).
* Все столбцы являются обычными

Не соответствует

category|products
---|---
books|bookname1, bookname2
toys|toy1, toy2

Соответствует

category|products
---|---
books|bookname1
books|bookname2
toys|toy1
toys|toy2

## Вторая нормальная форма
> Переменная отношения находится во второй нормальной форме тогда и только тогда, когда она находится в первой нормальной форме и каждый неключевой атрибут неприводимо зависит от её потенциального ключа.

Не приводимо, значти что из ключа нельзя выкинуть колонки сохранив его уникальность.
Потенциальный ключ - это любой ключ котороый можно определить в таблице.

Обычными словами в таблице не должно быть набора полей одни из которох зависят от ключа целиком, а другие от какой-то части ключа.

Например: {id пользоывателя, фамилия, имя, отчество, предмет, среняя оценка по предмету}
Фамилия, Имя, Отчество зависят только от ключа id пользователя
средняя оценка по предмету зависит от комбинации ключей id пользователя, предмет
таким образом таблица не соответствует 2ой нормальной форме.

Не соответствует

id|name|surname|course|avg score
---|---|---|---|---
1|Коля|Петров|english|4
2|Вася|Иванов|spanish|3
3|Женя|Карпов|english|5
4|Петя|Карпов|spanish|4

Соответствует

id|name|surname
---|---|---
1|Коля|Петров
2|Вася|Иванов
3|Женя|Карпов
4|Петя|Карпов

user_id|course|avg score
---|---|---
1|english|4
2|spanish|3
3|english|5
4|spanish|4

## Треться нормальная форма

Не соответствует



## Форма Бойса Кодда
## Четвертая нормальная форма
## Пятая нормальная форма
## Доменно-ключевая нормальная форма 
## Шестая нормальная форма
